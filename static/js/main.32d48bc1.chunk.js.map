{"version":3,"sources":["styles/index.module.css","services/imageApi.js","components/SearchForm.js","components/PhotoCard.js","components/Gallery.js","services/loader.js","components/Modal.js","components/App.js","index.js"],"names":["module","exports","KEY","getImages","query","page","axios","get","params","key","q","image_type","orientation","per_page","SearchForm","state","inputValue","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","this","className","styles","searchForm","type","autoComplete","placeholder","onChange","Component","PhotoCard","image","onModalOpen","webformatURL","largeImageURL","likes","views","comments","downloads","photoCard","src","alt","stats","statsItem","fullscreenButton","onClick","T","images","arrayOf","shape","string","isRequired","number","func","Gallery","gallery","map","id","rootLoader","document","getElementById","spinLoader","createPortal","color","height","width","timeout","rootModal","Modal","backdropRef","createRef","handleKeyDown","code","closeModal","handleButtonClose","handleBackdropClick","current","window","addEventListener","removeEventListener","children","backdrop","ref","role","modal","App","isLoading","loadMore","isModalOpen","onModalClose","fetchImages","then","response","prevState","data","hits","scrollTo","top","body","scrollHeight","behavior","catch","error","finally","prevProps","app","length","button","disabled","ReactDOM","render"],"mappings":"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","file":"static/js/main.32d48bc1.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"styles_app__3BWmn\",\"searchForm\":\"styles_searchForm__1H8QX\",\"gallery\":\"styles_gallery__IGluk\",\"photoCard\":\"styles_photoCard__3j0H3\",\"stats\":\"styles_stats__1pQM2\",\"statsItem\":\"styles_statsItem__3KmRa\",\"fullscreenButton\":\"styles_fullscreenButton__34T3C\",\"button\":\"styles_button__1bKAg\",\"backdrop\":\"styles_backdrop__1Tryl\",\"modal\":\"styles_modal__1DsPE\"};","import axios from 'axios';\r\n\r\nconst KEY = '14271027-f3d8d522fc053d5e4c1bf7f1b';\r\nconst getImages = (query, page = 1) => {\r\n  return axios.get('https://pixabay.com/api/', {\r\n    params: {\r\n      key: KEY,\r\n      q: query,\r\n      image_type: 'photo',\r\n      orientation: 'horizontal',\r\n      per_page: 12,\r\n      page,\r\n    },\r\n  });\r\n};\r\n\r\nexport default getImages;\r\n","import React, { Component } from 'react';\r\nimport T from 'prop-types';\r\nimport styles from '../styles/index.module.css';\r\n\r\nexport default class SearchForm extends Component {\r\n  static propTypes = {\r\n    onSubmit: T.func.isRequired,\r\n  };\r\n\r\n  state = {\r\n    inputValue: '',\r\n  };\r\n\r\n  handleChange = e => {\r\n    this.setState({\r\n      inputValue: e.target.value,\r\n    });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.inputValue);\r\n\r\n    this.setState({ inputValue: '' });\r\n  };\r\n\r\n  render() {\r\n    const { inputValue } = this.state;\r\n    return (\r\n      <form className={styles.searchForm} onSubmit={this.handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          autoComplete=\"off\"\r\n          placeholder=\"Search images...\"\r\n          value={inputValue}\r\n          onChange={this.handleChange}\r\n        />\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport T from 'prop-types';\r\nimport styles from '../styles/index.module.css';\r\n\r\nconst PhotoCard = ({ image, onModalOpen }) => {\r\n  const {\r\n    webformatURL,\r\n    largeImageURL,\r\n    likes,\r\n    views,\r\n    comments,\r\n    downloads,\r\n  } = image;\r\n  return (\r\n    <div className={styles.photoCard}>\r\n      <img src={webformatURL} alt=\"img\" />\r\n      <div className={styles.stats}>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">thumb_up</i>\r\n          {likes}\r\n        </p>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">visibility</i>\r\n          {views}\r\n        </p>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">comment</i>\r\n          {comments}\r\n        </p>\r\n        <p className={styles.statsItem}>\r\n          <i className=\"material-icons\">cloud_download</i>\r\n          {downloads}\r\n        </p>\r\n      </div>\r\n      <button\r\n        type=\"button\"\r\n        className={styles.fullscreenButton}\r\n        onClick={() => onModalOpen(largeImageURL)}\r\n      >\r\n        <i className=\"material-icons\">zoom_out_map</i>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\nPhotoCard.T = {\r\n  images: T.arrayOf(\r\n    T.shape({\r\n      webformatURL: T.string.isRequired,\r\n      likes: T.number.isRequired,\r\n      views: T.number.isRequired,\r\n      comments: T.number.isRequired,\r\n      downloads: T.number.isRequired,\r\n      largeImageURL: T.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  onModalOpen: T.func.isRequired,\r\n};\r\nexport default PhotoCard;\r\n","import React from 'react';\r\nimport T from 'prop-types';\r\nimport styles from '../styles/index.module.css';\r\nimport PhotoCard from './PhotoCard';\r\n\r\nconst Gallery = ({ images, onModalOpen }) => (\r\n  <ul className={styles.gallery}>\r\n    {images.map(image => (\r\n      <PhotoCard key={image.id} image={image} onModalOpen={onModalOpen} />\r\n    ))}\r\n  </ul>\r\n);\r\nGallery.propTypes = {\r\n  images: T.arrayOf(\r\n    T.shape({\r\n      webformatURL: T.string.isRequired,\r\n      likes: T.number.isRequired,\r\n      views: T.number.isRequired,\r\n      comments: T.number.isRequired,\r\n      downloads: T.number.isRequired,\r\n      largeImageURL: T.string.isRequired,\r\n    }).isRequired,\r\n  ).isRequired,\r\n  onModalOpen: T.func.isRequired,\r\n};\r\nexport default Gallery;\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nconst rootLoader = document.getElementById('loader');\r\nconst spinLoader = () =>\r\n  createPortal(\r\n    <Loader\r\n      type=\"Plane\"\r\n      color=\"rgb(127, 255, 0)\"\r\n      height={80}\r\n      width={80}\r\n      timeout={3000}\r\n    />,\r\n    rootLoader,\r\n  );\r\nexport default spinLoader;\r\n","import React, { Component, createRef } from 'react';\r\nimport T from 'prop-types';\r\nimport { createPortal } from 'react-dom';\r\nimport styles from '../styles/index.module.css';\r\n\r\nconst rootModal = document.getElementById('modal');\r\nclass Modal extends Component {\r\n  static propTypes = {\r\n    children: T.node.isRequired,\r\n    closeModal: T.func.isRequired,\r\n  };\r\n\r\n  backdropRef = createRef();\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyDown);\r\n  }\r\n\r\n  handleKeyDown = e => {\r\n    if (e.code !== 'Escape') {\r\n      return;\r\n    }\r\n    this.props.closeModal();\r\n  };\r\n\r\n  handleButtonClose = () => {\r\n    this.props.closeModal();\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (this.backdropRef.current && this.backdropRef.current !== e.target) {\r\n      return;\r\n    }\r\n    this.props.closeModal();\r\n  };\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    return createPortal(\r\n      <div\r\n        className={styles.backdrop}\r\n        ref={this.backdropRef}\r\n        onClick={this.handleBackdropClick}\r\n        role=\"presentation\"\r\n      >\r\n        <div className={styles.modal}>{children}</div>\r\n      </div>,\r\n      rootModal,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\r\nimport getImages from '../services/imageApi';\r\nimport styles from '../styles/index.module.css';\r\nimport SearchForm from './SearchForm';\r\nimport Gallery from './Gallery';\r\nimport Loader from '../services/loader';\r\nimport Modal from './Modal';\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\r\n\r\nclass App extends Component {\r\n  state = {\r\n    images: [],\r\n    page: 1,\r\n    query: '',\r\n    isLoading: false,\r\n    loadMore: false,\r\n    largeImageURL: null,\r\n    isModalOpen: false,\r\n  };\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { query } = this.state;\r\n    if (prevState.query !== query) {\r\n      this.fetchImages();\r\n    }\r\n  }\r\n\r\n  onSubmit = query => {\r\n    this.setState({ query, images: [], page: 1 });\r\n  };\r\n\r\n  onModalOpen = largeImageURL => {\r\n    this.setState({ isModalOpen: true, largeImageURL });\r\n  };\r\n\r\n  onModalClose = () => {\r\n    this.setState({ isModalOpen: null });\r\n  };\r\n\r\n  fetchImages = () => {\r\n    const { query, page } = this.state;\r\n    this.setState({ isLoading: true });\r\n\r\n    getImages(query, page)\r\n      .then(response => {\r\n        this.setState(prevState => ({\r\n          images: [...prevState.images, ...response.data.hits],\r\n          page: prevState.page + 1,\r\n        }));\r\n        window.scrollTo({\r\n          top: document.body.scrollHeight,\r\n          behavior: 'smooth',\r\n        });\r\n      })\r\n      .catch(error => {\r\n        this.setState('ERROR!');\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      images,\r\n      loadMore,\r\n      isLoading,\r\n      largeImageURL,\r\n      isModalOpen,\r\n    } = this.state;\r\n    return (\r\n      <div className={styles.app}>\r\n        <SearchForm onSubmit={this.onSubmit} />\r\n        <Gallery images={images} onModalOpen={this.onModalOpen} />\r\n        {isModalOpen && (\r\n          <Modal images={images} closeModal={this.onModalClose}>\r\n            <img src={largeImageURL} alt=\"largeImage\" />\r\n          </Modal>\r\n        )}\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && (\r\n          <button\r\n            type=\"button\"\r\n            onClick={this.fetchImages}\r\n            className={styles.button}\r\n            disabled={loadMore}\r\n          >\r\n            Load more\r\n          </button>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}